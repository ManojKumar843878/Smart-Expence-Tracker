<div class="container">
  <h2>My Expenses</h2>

  <!-- Add / Edit Form -->
  <div class="card form-card">
    <h3>{{ editingId ? 'Edit Expense' : 'Add New Expense' }}</h3>

    <form (ngSubmit)="addOrUpdate()">
      <div class="grid">
        <input
          type="number"
          placeholder="Amount (e.g. 500)"
          [(ngModel)]="form.amount"
          name="amount"
          required
          min="1"
        />

        <select [(ngModel)]="form.catogory" name="catogory"  required>
          <option value="" disabled selected>Select Category</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>

        <input type="date" [(ngModel)]="form.date" name="date"  required />

        <input
          type="text"
          placeholder="Description (optional)"
          [(ngModel)]="form.description"
          name="description"
        />
      </div>

      <div class="button-group">
        <button type="submit" class="btn-primary">
          {{ editingId ? 'Update' : 'Add' }} Expense
        </button>

        <button
          type="button"
          *ngIf="editingId"
          (click)="cancelEdit()"
          class="btn-secondary"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>

  <!-- Expenses List -->
  <div class="card list-card">
    <h3>All Expenses ({{ expenses.length }})</h3>

    <table *ngIf="expenses.length > 0; else noExpenses">
      <thead>
        <tr>
          <th>Amount</th>
          <th>Category</th>
          <th>Date</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let exp of expenses">
          <td>{{ exp.amount }}</td>
          <td>{{ exp.catogory }}</td>
          <td>{{ exp.date }}</td>
          <td>{{ exp.description || '-' }}</td>
          <td>
            <button (click)="edit(exp)" class="btn-edit">Edit</button>
            <button (click)="delete(exp)" class="btn-delete">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

    <ng-template #noExpenses>
      <p class="empty">No expenses added yet</p>
    </ng-template>
  </div>
</div>